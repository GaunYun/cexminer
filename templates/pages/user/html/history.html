<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Automated Crypto Trading Bot - Cexminer.nz</title>
  <meta name="description" content="Admin, Dashboard, Bootstrap, Bootstrap 4, Angular, AngularJS" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!-- for ios 7 style, multi-resolution icon of 152x152 -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-barstyle" content="black-translucent">
  <link rel="apple-touch-icon" href="../static/user/assets/images/logo.png">
  <meta name="apple-mobile-web-app-title" content="Flatkit">
  <!-- for Chrome on Android, multi-resolution icon of 196x196 -->
  <meta name="mobile-web-app-capable" content="yes">
  <link rel="shortcut icon" sizes="196x196" href="../static/user/assets/images/logo.png">
  
  <!-- style -->
  <link rel="stylesheet" href="../static/user/assets/animate.css/animate.min.css" type="text/css" />
  <link rel="stylesheet" href="../static/user/assets/glyphicons/glyphicons.css" type="text/css" />
  <link rel="stylesheet" href="../static/user/assets/font-awesome/css/font-awesome.min.css" type="text/css" />
  <link rel="stylesheet" href="../static/user/assets/material-design-icons/material-design-icons.css" type="text/css" />
  <link rel="stylesheet" href="../static/user/assets/styles/jquery.dataTables.min.css"/>

  <link rel="stylesheet" href="../static/user/assets/bootstrap/dist/css/bootstrap.min.css" type="text/css" />
  <!-- build:css ../assets/styles/app.min.css -->
  <link rel="stylesheet" href="../static/user/assets/styles/app.css" type="text/css" />
  <!-- endbuild -->
  <link rel="stylesheet" href="../static/user/assets/styles/font.css" type="text/css" />
</head>
<body class="dark">
  <div class="app" id="app">

<!-- ############ LAYOUT START-->

  <!-- aside -->
  <div id="aside" class="app-aside modal nav-dropdown">
  	<!-- fluid app aside -->
    <div class="left navside dark dk" data-layout="column">
  	  <div class="navbar no-radius">
        <!-- brand -->
        <a class="navbar-brand">
        	{% comment %}<div ui-include="'../static/user/assets/images/logo.svg'"></div>{% endcomment %}
        	<img src="../static/landingpage/img/logo.png" alt="." >
        	{% comment %}<span class="hidden-folded inline">Flatkit</span>{% endcomment %}
        </a>
        <!-- / brand -->
      </div>
      <div class="hide-scroll" data-flex>
          <nav class="scroll nav-light">
            
            <ul class="nav" ui-nav>
                <li class="nav-header hidden-folded">
                  <small class="text-muted">Main</small>
                </li>
      <!-- Dashboard -->
                <li>
                  <a href="/dashboard" >
                    <div class="row">
                      <span class="nav-icon fa fa-dashboard" style="margin-left: 10px">
                      </span>
                      <span class="nav-text">Dashboard</span>
                    </div>
                  </a>
                </li>
      <!-- Profit and Loss statement -->
                <li>
                  <a href="/profit_loss">
                    <div class="row">
                      <span class="nav-icon fa fa-exchange" style="margin-left: 10px">
                      </span>
                      <span class="nav-text">Profit and Loss</span>
                    </div>
                  </a>
                </li>
      <!-- Autotrade System -->
                <li>
                  <a href="/trading">
                    <div class="row">
                      <span class="nav-icon fa fa-tasks" style="margin-left: 10px">
                      </span>
                      <span class="nav-text">Autotrade System</span>
                    </div>
                  </a>
                </li>
      <!-- Trading History -->
                <li>
                  <a href="/history">
                    <div class="row">
                      <span class="nav-icon fa fa-bars" style="margin-left: 10px">
                      </span>
                      <span class="nav-text">Trading History</span>
                    </div>
                  </a>
                </li>
      <!-- Exchange information -->
                <li>
                  <a href="/exchange_info">
                    <div class="row">
                      <span class="nav-icon fa fa-key" style="margin-left: 10px">
                      </span>
                      <span class="nav-text">Exchange Info</span>
                    </div>
                  </a>
                </li>
      <!-- User Settings -->
                <li>
                  <a href="/user_setting">
                    <div class="row">
                      <span class="nav-icon fa fa-sun-o" style="margin-left: 10px">
                      </span>
                      <span class="nav-text">User Settings</span>
                    </div>
                  </a>
                </li>
              </ul>
          </nav>
      </div>
      {% comment %}<div class="b-t">
        <div class="nav-fold">
        	<a href="profile.html">
        	    <span class="pull-left">
        	      <img src="../static/user/assets/images/a0.jpg" alt="..." class="w-40 img-circle">
        	    </span>
        	    <span class="clear hidden-folded p-x">
        	      <span class="block _500">Jean Reyes</span>
        	      <small class="block text-muted"><i class="fa fa-circle text-success m-r-sm"></i>online</small>
        	    </span>
        	</a>
        </div>
      </div>{% endcomment %}
    </div>
  </div>
  <!-- / -->
  
  <!-- content -->
  <div id="content" class="app-content box-shadow-z0" role="main">
    <div class="app-header white box-shadow">
        <div class="navbar navbar-toggleable-sm flex-row align-items-center">
            <!-- Open side - Naviation on mobile -->
            <a data-toggle="modal" data-target="#aside" class="hidden-lg-up mr-3">
              <i class="material-icons">&#xe5d2;</i>
            </a>
            <!-- / -->
        
            <!-- Page title - Bind to $state's title -->
            <div class="mb-0 h5 no-wrap" ng-bind="$state.current.data.title" id="pageTitle"></div>
        
            <!-- Content Title -->
            <div class="mb-2">
              <h3 style="margin-bottom: 0px">Trading History</h3>
              <div ui-include="'../views/blocks/navbar.form.html'"></div>
            </div>
            <!-- / navbar collapse -->
        
            <!-- navbar right -->
            {% comment %}<ul class="nav navbar-nav ml-auto flex-row">
              <li class="nav-item dropdown pos-stc-xs">
                <a class="nav-link mr-2" href data-toggle="dropdown">
                  <i class="material-icons">&#xe7f5;</i>
                  <span class="label label-sm up warn">3</span>
                </a>
                <div ui-include="'../views/blocks/dropdown.notification.html'"></div>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link p-0 clear" href="#" data-toggle="dropdown">
                  <span class="avatar w-32">
                    <img src="../static/user/assets/images/a0.jpg" alt="...">
                    <i class="on b-white bottom"></i>
                  </span>
                </a>
                <div ui-include="'../views/blocks/dropdown.user.html'"></div>
              </li>
              <li class="nav-item hidden-md-up">
                <a class="nav-link pl-2" data-toggle="collapse" data-target="#collapse">
                  <i class="material-icons">&#xe5d4;</i>
                </a>
              </li>
            </ul>{% endcomment %}
            <!-- / navbar right -->
        </div>
    </div>
    <div class="app-footer">
      <div class="p-2 text-xs">
        <div class="pull-right text-muted py-1">
          &copy; Copyright <strong>Flatkit</strong> <span class="hidden-xs-down">- Built with Love v1.1.3</span>
          <a ui-scroll-to="content"><i class="fa fa-long-arrow-up p-x-sm"></i></a>
        </div>
        <div class="nav">
          <a class="nav-link" href="../">About</a>
          <a class="nav-link" href="http://themeforest.net/user/flatfull/portfolio?ref=flatfull">Get it</a>
        </div>
      </div>
    </div>
    <div ui-view class="app-body" id="view">

<!-- ############ PAGE START-->
<div class="padding">
  <div class="row">
    {% comment %}<div class="col-sm-12">
        <div class="box">
          <div class="box-header">
            <h3>Transaction Graph</h3>
            <small class="block text-muted">Showing number of transaction</small>
          </div>
          <div class="box-body">
            <div ui-jp="chart" ui-options=" {
              tooltip : {
                  trigger: 'axis'
              },
              legend: {
                  data:['Sell','Buy']
              },
              calculable : true,
              xAxis : [
                  {
                      type : 'category',
                      boundaryGap : false,
                      data : ['Mon','Tue','Wed','Thu','Fri','Sat','Sun']
                  }
              ],
              yAxis : [
                  {
                      type : 'value',
                      axisLabel : {
                          formatter: '{value} '
                      }
                  }
              ],
              series : [
                  {
                      name:'Sell',
                      type:'line',
                      data:[11, 11, 15, 13, 12, 13, 10],
                      markPoint : {
                          data : [
                              {type : 'max', name: 'Max'},
                              {type : 'min', name: 'Min'}
                          ]
                      },
                      markLine : {
                          data : [
                              {type : 'average', name: 'Average'}
                          ]
                      }
                  },
                  {
                      name:'Buy',
                      type:'line',
                      data:[1, 4, 2, 5, 3, 2, 0],
                      markPoint : {
                          data : [
                              {name : 'Min of Week', value : 0, xAxis: 6, yAxis: -1.5}
                          ]
                      },
                      markLine : {
                          data : [
                              {type : 'average', name : 'Average'}
                          ]
                      }
                  }
              ]
            }" style="height:300px" >
            </div>
          </div>
        </div>
      </div>{% endcomment %}
    {% comment %}<div class="col-sm-6">
      <div class="box">
        <div class="box-header">
          <h3>Stats</h3>
        </div>
        <table class="table">
          <thead>
            <tr>
              <th style="width:60px;" class="text-center">Graph</th>
              <th>Item</th>
              <th style="width:70px;"></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <div ui-jp="sparkline" ui-refresh="app.setting.color" ui-options="[ 16,15,15,14,17,18,16,15,16 ], {type:'bar', height:19, barWidth:4, barSpacing:2, barColor:'#0cc2aa'}" class="sparkline inline">loading...</div>
              </td>
              <td>App downloads</td>
              <td class="text-success">
                <i class="fa fa-level-up"></i> 40%
              </td>
            </tr>
            <tr>
              <td class="text-center">
                <div ui-jp="sparkline" ui-refresh="app.setting.color" ui-options="[ 60,30,10 ], {type:'pie', height:19, sliceColors:['#fcc100','#fff','#0cc2aa']}" class="sparkline inline">loading...</div>
              </td>
              <td>Social connection</td>
              <td class="text-success">
                <i class="fa fa-level-up"></i> 20%
              </td>
            </tr>
            <tr>
              <td>
                <div ui-jp="sparkline" ui-refresh="app.setting.color" ui-options="[ 16,15,15,14,17,18,16,15,16 ], {type:'line', height:19, width:60, lineColor:'#0cc2aa', fillColor:'transparent'}" class="sparkline inline">loading...</div>
              </td>
              <td>Revenue</td>
              <td class="text-warning">
                <i class="fa fa-level-down"></i> 5%
              </td>
            </tr>
            <tr>
              <td>
                <div ui-jp="sparkline" ui-refresh="app.setting.color" ui-options="[ 16,15,15,14,17,18,16,15,16 ], {type:'discrete', height:19, width:60, lineColor:'#6cc788'}" class="sparkline inline">loading...</div>
              </td>
              <td>Customer increase</td>
              <td class="text-danger">
                <i class="fa fa-level-down"></i> 20%
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>{% endcomment %}
  </div>
  <form action="" method="post">{% csrf_token %}
  <div class="box">
    <div class="box-header">
      <h3>Trading History Table</h3>
    </div>
    <div class="row p-a">
      <div class="row col-sm-2">
        <select id="trading_history_bot_type" onchange="bot_type_change()" style="background-color: rgb(72,87,103)" class="input-sm form-control w-sm inline v-middle">
          <option value="Demo">Demo Bot</option>
          <option value="Live">Live Bot</option>
        </select>
        {% comment %}<button class="btn btn-sm white">Apply</button>{% endcomment %}
      </div>
      <div class="col-sm-4">
        <select id="trading_history_bot_name" onchange="bot_name_change()" style="background-color: rgb(72,87,103)" class="input-sm form-control w-sm inline v-middle">
                <option value="all">All</option>
          {% if bot_list %}
            {% for bot in bot_list %}
                <option value="{{ bot.0 }}">{{ bot.1 }}</option>
            {% endfor %}
          {% endif %}
        </select>
      </div>
      {% comment %}<div class="col-sm-3">
        <div class="input-group input-group-sm">
          <input type="text" class="form-control" placeholder="Search">
          <span class="input-group-btn">
            <button class="btn b-a white" type="button">Go!</button>
          </span>
        </div>
      </div>{% endcomment %}
    </div>
    <table id="trading_history" class="cell-border" width="100%" {% comment %}class="table-responsive"{% endcomment %}>
        {% comment %}<thead>
          <tr>
            <th>Bot Name</th>
            <th>Order Type</th>
            <th>Exchange</th>
            <th>Crypto Name</th>
            <th>Trading Volume</th>
            <th>Price</th>
            <th>Trading Time</th>
          </tr>
        </thead>
        <tbody id="trading_history_data">
          {% if history_data_list %}
            {% for h in history_data_list %}
              <tr>
                <th>{{ h.0 }}</th>
                <th>{{ h.1 }}</th>
                <th>{{ h.2 }}</th>
                <th>{{ h.3 }}</th>
                <th>{{ h.4 }}</th>
                <th>{{ h.5 }}</th>
                <th>{{ h.6 }}</th>
              </tr>
            {% endfor %}
          {% endif %}

        </tbody>{% endcomment %}
    </table>
    {% comment %}<footer class="dker p-a">
      <div class="row">
        <div class="col-sm-4 hidden-xs">
          <select class="input-sm form-control w-sm inline v-middle">
            <option value="0">Bulk action</option>
            <option value="1">Delete selected</option>
            <option value="2">Bulk edit</option>
            <option value="3">Export</option>
          </select>
          <button class="btn btn-sm white">Apply</button>
        </div>
        <div class="col-sm-4 text-center">
          <small class="text-muted inline m-t-sm m-b-sm">showing 20-30 of 50 items</small>
        </div>
        <div class="col-sm-4 text-right text-center-xs">
          <ul class="pagination pagination-sm m-0">
            <li><a href><i class="fa fa-chevron-left"></i></a></li>
            <li class="active"><a href>1</a></li>
            <li><a href>2</a></li>
            <li><a href>3</a></li>
            <li><a href>4</a></li>
            <li><a href>5</a></li>
            <li><a href><i class="fa fa-chevron-right"></i></a></li>
          </ul>
        </div>
      </div>
    </footer>{% endcomment %}
  </div>
  <div class="box">
    <div class="box-header">
      <h3>Trading History Graph</h3>
    </div>
    <div class="row p-a">
      <div class="row col-sm-2">
        <select id="history_graph_bot_type" onchange="graph_bot_type_change()" style="background-color: rgb(72,87,103)" class="input-sm form-control w-sm inline v-middle">
          <option value="Demo">Demo Bot</option>
          <option value="Live">Live Bot</option>
        </select>
        {% comment %}<button class="btn btn-sm white">Apply</button>{% endcomment %}
      </div>
      <div class="col-sm-4">
        <select id="history_graph_bot_name" style="background-color: rgb(72,87,103)" class="input-sm form-control w-sm inline v-middle">
          {% if bot_list %}
            {% for bot in bot_list %}
                <option value="{{ bot.0 }}">{{ bot.1 }}</option>
            {% endfor %}
          {% endif %}
        </select>
      </div>
      <div class="col-sm-2">
        <a class="form-control btn btn-fw white" onclick="view_history_graph()" href="#">View History Graph</a>
      </div>
    </div>
    <div class="m-m" id="trading_history_chart" style="height: 550px; width: 100%"></div>
    {% comment %}<footer class="dker p-a">
      <div class="row">
        <div class="col-sm-4 hidden-xs">
          <select class="input-sm form-control w-sm inline v-middle">
            <option value="0">Bulk action</option>
            <option value="1">Delete selected</option>
            <option value="2">Bulk edit</option>
            <option value="3">Export</option>
          </select>
          <button class="btn btn-sm white">Apply</button>
        </div>
        <div class="col-sm-4 text-center">
          <small class="text-muted inline m-t-sm m-b-sm">showing 20-30 of 50 items</small>
        </div>
        <div class="col-sm-4 text-right text-center-xs">
          <ul class="pagination pagination-sm m-0">
            <li><a href><i class="fa fa-chevron-left"></i></a></li>
            <li class="active"><a href>1</a></li>
            <li><a href>2</a></li>
            <li><a href>3</a></li>
            <li><a href>4</a></li>
            <li><a href>5</a></li>
            <li><a href><i class="fa fa-chevron-right"></i></a></li>
          </ul>
        </div>
      </div>
    </footer>{% endcomment %}
  </div>
  </form>
  {% comment %}<div class="box">
    <div class="box-header">
      <h2>Responsive table</h2>
      <small>Wrap the table in a div with .table-responsive class</small>
    </div>
    <div class="table-responsive">
      <table class="table table-bordered m-0">
        <thead>
          <tr>
            <th>#</th>
            <th>Table heading</th>
            <th>Table heading</th>
            <th>Table heading</th>
            <th>Table heading</th>
            <th>Table heading</th>
            <th>Table heading</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>Table cell</td>
            <td>Table cell</td>
            <td>Table cell</td>
            <td>Table cell</td>
            <td>Table cell</td>
            <td>Table cell</td>
          </tr>
          <tr>
            <td>2</td>
            <td>Table cell</td>
            <td>Table cell</td>
            <td>Table cell</td>
            <td>Table cell</td>
            <td>Table cell</td>
            <td>Table cell</td>
          </tr>
          <tr>
            <td>3</td>
            <td>Table cell</td>
            <td>Table cell</td>
            <td>Table cell</td>
            <td>Table cell</td>
            <td>Table cell</td>
            <td>Table cell</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>{% endcomment %}
</div>

<!-- ############ PAGE END-->

    </div>
  </div>
  <!-- / -->

  <!-- theme switcher -->
  {% comment %}<div id="switcher">
    <div class="switcher box-color dark-white text-color" id="sw-theme">
      <a href ui-toggle-class="active" target="#sw-theme" class="box-color dark-white text-color sw-btn">
        <i class="fa fa-gear"></i>
      </a>
      <div class="box-header">
        <a href="https://themeforest.net/item/flatkit-app-ui-kit/13231484?ref=flatfull" class="btn btn-xs rounded danger pull-right">BUY</a>
        <h2>Theme Switcher</h2>
      </div>
      <div class="box-divider"></div>
      <div class="box-body">
        <p class="hidden-md-down">
          <label class="md-check m-y-xs"  data-target="folded">
            <input type="checkbox">
            <i class="green"></i>
            <span class="hidden-folded">Folded Aside</span>
          </label>
          <label class="md-check m-y-xs" data-target="boxed">
            <input type="checkbox">
            <i class="green"></i>
            <span class="hidden-folded">Boxed Layout</span>
          </label>
          <label class="m-y-xs pointer" ui-fullscreen>
            <span class="fa fa-expand fa-fw m-r-xs"></span>
            <span>Fullscreen Mode</span>
          </label>
        </p>
        <p>Colors:</p>
        <p data-target="themeID">
          <label class="radio radio-inline m-0 ui-check ui-check-color ui-check-md" data-value="{primary:'primary', accent:'accent', warn:'warn'}">
            <input type="radio" name="color" value="1">
            <i class="primary"></i>
          </label>
          <label class="radio radio-inline m-0 ui-check ui-check-color ui-check-md" data-value="{primary:'accent', accent:'cyan', warn:'warn'}">
            <input type="radio" name="color" value="2">
            <i class="accent"></i>
          </label>
          <label class="radio radio-inline m-0 ui-check ui-check-color ui-check-md" data-value="{primary:'warn', accent:'light-blue', warn:'warning'}">
            <input type="radio" name="color" value="3">
            <i class="warn"></i>
          </label>
          <label class="radio radio-inline m-0 ui-check ui-check-color ui-check-md" data-value="{primary:'success', accent:'teal', warn:'lime'}">
            <input type="radio" name="color" value="4">
            <i class="success"></i>
          </label>
          <label class="radio radio-inline m-0 ui-check ui-check-color ui-check-md" data-value="{primary:'info', accent:'light-blue', warn:'success'}">
            <input type="radio" name="color" value="5">
            <i class="info"></i>
          </label>
          <label class="radio radio-inline m-0 ui-check ui-check-color ui-check-md" data-value="{primary:'blue', accent:'indigo', warn:'primary'}">
            <input type="radio" name="color" value="6">
            <i class="blue"></i>
          </label>
          <label class="radio radio-inline m-0 ui-check ui-check-color ui-check-md" data-value="{primary:'warning', accent:'grey-100', warn:'success'}">
            <input type="radio" name="color" value="7">
            <i class="warning"></i>
          </label>
          <label class="radio radio-inline m-0 ui-check ui-check-color ui-check-md" data-value="{primary:'danger', accent:'grey-100', warn:'grey-300'}">
            <input type="radio" name="color" value="8">
            <i class="danger"></i>
          </label>
        </p>
        <p>Themes:</p>
        <div data-target="bg" class="row no-gutter text-u-c text-center _600 clearfix">
          <label class="p-a col-sm-6 light pointer m-0">
            <input type="radio" name="theme" value="" hidden>
            Light
          </label>
          <label class="p-a col-sm-6 grey pointer m-0">
            <input type="radio" name="theme" value="grey" hidden>
            Grey
          </label>
          <label class="p-a col-sm-6 dark pointer m-0">
            <input type="radio" name="theme" value="dark" hidden>
            Dark
          </label>
          <label class="p-a col-sm-6 black pointer m-0">
            <input type="radio" name="theme" value="black" hidden>
            Black
          </label>
        </div>
      </div>
    </div>
    
    <div class="switcher box-color black lt" id="sw-demo">
      <a href ui-toggle-class="active" target="#sw-demo" class="box-color black lt text-color sw-btn">
        <i class="fa fa-list text-white"></i>
      </a>
      <div class="box-header">
        <h2>Demos</h2>
      </div>
      <div class="box-divider"></div>
      <div class="box-body">
        <div class="row no-gutter text-u-c text-center _600 clearfix">
          <a href="dashboard.html"
            class="p-a col-sm-6 primary">
            <span class="text-white">Default</span>
          </a>
          <a href="dashboard.0.html"
            class="p-a col-sm-6 success">
            <span class="text-white">Zero</span>
          </a>
          <a href="dashboard.1.html"
            class="p-a col-sm-6 blue">
            <span class="text-white">One</span>
          </a>
          <a href="dashboard.2.html"
            class="p-a col-sm-6 warn">
            <span class="text-white">Two</span>
          </a>
          <a href="dashboard.3.html"
            class="p-a col-sm-6 danger">
            <span class="text-white">Three</span>
          </a>
          <a href="dashboard.4.html"
            class="p-a col-sm-6 green">
            <span class="text-white">Four</span>
          </a>
          <a href="dashboard.5.html"
            class="p-a col-sm-6 info">
            <span class="text-white">Five</span>
          </a>
          <div 
            class="p-a col-sm-6 lter">
            <span class="text">...</span>
          </div>
        </div>
      </div>
    </div>
  </div>{% endcomment %}
  <!-- / -->

<!-- ############ LAYOUT END-->

  </div>
<!-- build:js scripts/app.html.js -->
<!-- jQuery -->
  <script src="../static/user/libs/jquery/jquery/dist/jquery.js"></script>
  <script src="../static/user/libs/jquery/jquery/dist/jquery-3.3.1.js"></script>
  <script src="../static/user/libs/jquery/jquery/dist/jquery.dataTables.min.js"></script>
<!-- Bootstrap -->
  <script src="../static/user/libs/jquery/tether/dist/js/tether.min.js"></script>
  <script src="../static/user/libs/jquery/bootstrap/dist/js/bootstrap.js"></script>
<!-- core -->
  <script src="../static/user/libs/jquery/underscore/underscore-min.js"></script>
  <script src="../static/user/libs/jquery/jQuery-Storage-API/jquery.storageapi.min.js"></script>
  <script src="../static/user/libs/jquery/PACE/pace.min.js"></script>

  <script src="../static/user/scripts/config.lazyload.js"></script>

  <script src="../static/user/scripts/palette.js"></script>
  <script src="../static/user/scripts/ui-load.js"></script>
  <script src="../static/user/scripts/ui-jp.js"></script>
  <script src="../static/user/scripts/ui-include.js"></script>
  <script src="../static/user/scripts/ui-device.js"></script>
  <script src="../static/user/scripts/ui-form.js"></script>
  <script src="../static/user/scripts/ui-nav.js"></script>
  <script src="../static/user/scripts/ui-screenfull.js"></script>
  <script src="../static/user/scripts/ui-scroll-to.js"></script>
  <script src="../static/user/scripts/ui-toggle-class.js"></script>

  <script src="../static/user/scripts/app.js"></script>

  <!-- ajax -->
  <script src="../static/user/libs/jquery/jquery-pjax/jquery.pjax.js"></script>
  <script src="../static/user/scripts/ajax.js"></script>

  <!-- Highlight Chart Resources -->
{% comment %}<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>{% endcomment %}
<script src="https://code.highcharts.com/stock/highstock.js"></script>
<script src="https://code.highcharts.com/stock/modules/drag-panes.js"></script>
<script src="https://code.highcharts.com/stock/modules/exporting.js"></script>
<!-- endbuild -->

<script>

$(document).ready(function() {
    //var dataset = {{ history_data_list|safe }};
    //console.log(dataset)
    var csrf_token = $('input[name=csrfmiddlewaretoken]').val();
    $.ajax({
        method: "POST" ,
        url: "/history/",
        data: {csrfmiddlewaretoken: csrf_token},
        success: function (result) {
            if(result.history_data_list){
                var history_data_list = result.history_data_list;
                $('#trading_history').DataTable( {
                    data: history_data_list,
                    destroy: true,
                    columns: [
                        { title: "Bot Type" },
                        { title: "Bot Name" },
                        { title: "Order Type" },
                        { title: "Exchange" },
                        { title: "Crypto Name" },
                        { title: "Trading Volume" },
                        { title: "Price" },
                        { title: "Trading Time"}
                    ]
                } );
            }
            else{
                $('#trading_history').DataTable( {
                    data: [],
                    destroy: true,
                    columns: [
                        { title: "Bot Name" },
                        { title: "Order Type" },
                        { title: "Exchange" },
                        { title: "Crypto Name" },
                        { title: "Trading Volume" },
                        { title: "Price" },
                        { title: "Trading Time"}
                    ]
                } );
            }
        }
    });
} );
</script>
<script>
function bot_type_change(){
    var bot_type = $('#trading_history_bot_type').val();
    var bot_name = $('#trading_history_bot_name').val();
    var csrf_token = $('input[name=csrfmiddlewaretoken]').val();
    $.ajax({
        method: "POST" ,
        url: "/bot_type_change/",
        data: {bot_type: bot_type, csrfmiddlewaretoken: csrf_token},
        success: function (result) {
            var str1 = "<option value='All'>All</option>";
            var str2 = "";
            if (result.bot_list){
                var bot_list = result.bot_list
                for(var i=0; i<bot_list.length;i++){
                    var bot_data = bot_list[i]
                    str1 += "<option value='"+bot_data[0]+"'>"+bot_data[1]+"</option>"
                    //str2 += "<option value='"+bot_data[0]+"'>"+bot_data[1]+"</option>"
                }
                $('#trading_history_bot_name').html(str1);
                //$('#history_graph_bot_name').html(str2);
            }
            else{
                $('#trading_history_bot_name').html("");
                //$('#history_graph_bot_name').html("");
                //$('#trading_history').html("");
            }
            $('#trading_history').html("");
            if(result.history_data_list){
                var history_data_list = result.history_data_list;
                console.log(history_data_list);
                $('#trading_history').DataTable( {
                    data: history_data_list,
                    destroy: true,
                    columns: [
                        { title: "Bot Type" },
                        { title: "Bot Name" },
                        { title: "Order Type" },
                        { title: "Exchange" },
                        { title: "Crypto Name" },
                        { title: "Trading Volume" },
                        { title: "Price" },
                        { title: "Trading Time"}
                    ]
                } );
            }
            else{
                $('#trading_history').DataTable( {
                    data: [],
                    destroy: true,
                    columns: [
                        { title: "Bot Type" },
                        { title: "Bot Name" },
                        { title: "Order Type" },
                        { title: "Exchange" },
                        { title: "Crypto Name" },
                        { title: "Trading Volume" },
                        { title: "Price" },
                        { title: "Trading Time"}
                    ]
                } );
            }
            {% comment %}if(result.history_data_list){
                var history_data_list = result.history_data_list;
                for(var i=0;i<history_data_list.length;i++){
                    var history_data = history_data_list[i];
                    str2 += "<tr><th>"+history_data[0]+"</th>"+
                            "<th>"+history_data[1]+"</th>"+
                            "<th>"+history_data[2]+"</th>"+
                            "<th>"+history_data[3]+"</th>"+
                            "<th>"+history_data[4]+"</th>"+
                            "<th>"+history_data[5]+"</th>"+
                            "<th>"+history_data[6]+"</th></tr>"
                }
                $('#trading_history').html(str2);
            }
            else{
                $('#trading_history').html("")
            }{% endcomment %}
        }
    });
}
function graph_bot_type_change() {
    var bot_type = $('#history_graph_bot_type').val();
    var bot_name = $('#history_graph_bot_name').val();
    var csrf_token = $('input[name=csrfmiddlewaretoken]').val();
    $.ajax({
        method: "POST" ,
        url: "/bot_type_change/",
        data: {bot_type: bot_type, csrfmiddlewaretoken: csrf_token},
        success: function (result) {
            var str1 = "<option value='All'>All</option>";
            var str2 = "";
            if (result.bot_list){
                var bot_list = result.bot_list
                for(var i=0; i<bot_list.length;i++){
                    var bot_data = bot_list[i]
                    //str1 += "<option value='"+bot_data[0]+"'>"+bot_data[1]+"</option>"
                    str2 += "<option value='"+bot_data[0]+"'>"+bot_data[1]+"</option>"
                }
                //$('#trading_history_bot_name').html(str1);
                $('#history_graph_bot_name').html(str2);
            }
            else{
                //$('#trading_history_bot_name').html("");
                $('#history_graph_bot_name').html("");
                //$('#trading_history').html("");
            }
            //$('#trading_history').html("");

        }
    });
}
function bot_name_change(){
    var bot_type = $('#trading_history_bot_type').val();
    var bot_name = $('#trading_history_bot_name').val();
    var csrf_token = $('input[name=csrfmiddlewaretoken]').val();
    $.ajax({
        method: "POST" ,
        url: "/bot_name_change/",
        data: {bot_name: bot_name, csrfmiddlewaretoken: csrf_token},
        success: function (result) {
            var str2 = ""
            if(result.history_data_list){
                var history_data_list = result.history_data_list;
                $('#trading_history').DataTable( {
                    data: history_data_list,
                    destroy: true,
                    columns: [
                        { title: "Bot Type" },
                        { title: "Bot Name" },
                        { title: "Order Type" },
                        { title: "Exchange" },
                        { title: "Crypto Name" },
                        { title: "Trading Volume" },
                        { title: "Price" },
                        { title: "Trading Time"}
                    ]
                } );
            }
            else{
                $('#trading_history').DataTable( {
                    data: [],
                    destroy: true,
                    columns: [
                        { title: "Bot Type" },
                        { title: "Bot Name" },
                        { title: "Order Type" },
                        { title: "Exchange" },
                        { title: "Crypto Name" },
                        { title: "Trading Volume" },
                        { title: "Price" },
                        { title: "Trading Time"}
                    ]
                } );
            }
        }
    });
}
function view_history_graph(){
    var bot_type = $('#history_graph_bot_type').val();
    var bot_id = $('#history_graph_bot_name').val();
    var csrf_token = $('input[name=csrfmiddlewaretoken]').val();
    $.ajax({
        method: "POST" ,
        url: "/view_history_graph/",
        data: {bot_id: bot_id, csrfmiddlewaretoken: csrf_token},
        success: function (result) {
            var bot_kind = result.bot_kind;
            if(bot_kind == "Indicator BB Bot") {
                console.log(result.title);
                console.log(result.upper_data);
                bb_history_graph(result.title, result.chart_data, result.middle_data, result.upper_data, result.lower_data, result.flag_buy_data, result.flag_sell_data)
            }

        }
    });
}
function bb_history_graph(title, chart_data, middle_data, upper_data, lower_data, flag_buy_data, flag_sell_data){
  groupingUnits = [
        ['minute', [5,15,30]],
        [
        'hour',
        [1, 2, 3, 4, 6, 8, 12]
        ], [
        'day',
        [1]
        ], [
        'week',
        [1]
        ], [
        'month',
        [1, 3, 6]
        ]
    ];
  Highcharts.stockChart('trading_history_chart', {
    chart: {
        backgroundColor: "#354759",
        borderColor: "#293846"
    },
    rangeSelector: {
      selected: 1
    },

    title: {
      text: title
    },

    yAxis: [
      {
        labels: {
          align: 'right',
          x: -3
        },
        title: {
          text: 'OHLC'
        },
        height: '100%',
        lineWidth: 1,
        lineColor: '#2e3e4e',
        resize: {
          enabled: true
        }
      },
      {% comment %}{
        labels: {
          align: 'right',
          x: -3
        },
        title: {
          text: 'MACD'
        },


        top: '65%',
        height: '35%',
        offset: 0,
        lineWidth: 2
      }{% endcomment %}
    ],

    tooltip: {
      split: true
    },

    series: [
      {
        type: 'candlestick',
        name: title,
        data: chart_data,
        dataGrouping: {
          units: groupingUnits
        }
      },
      {
        type: 'line',
        name: 'Middle Band',
        data: middle_data,
        dataGrouping: {
          units: groupingUnits
        }
      },
      {
        type: 'line',
        name: 'Upper Band',
        data: upper_data,
          id: 'sell_series',
        dataGrouping: {
          units: groupingUnits
        }
      },
      {
        type: 'line',
        name: 'Lower Band',
        data: lower_data,
          id: 'buy_series',
        dataGrouping: {
          units: groupingUnits
        }
      },
      {
        type: 'flags',
        data: flag_buy_data,
        onSeries: 'buy_series',
        shape: 'circlepin',
        width: 23
      },
      {
        type: 'flags',
        data: flag_sell_data,
        onSeries: 'sell_series',
        shape: 'circlepin',
        width: 23
      }
    ]
  });
}
</script>
</body>
</html>
